{"ast":null,"code":"// I cleaned a bit your action, It was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\nimport axios from \"axios\";\nimport { Router } from \"react-router-dom\";\nexport const fetchUsersAction = () => {\n  return dispatch => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/users/all\").then(resp => {\n      return resp.json();\n    }).then(json => {\n      dispatch({\n        type: \"FETCH_USERS_SUCCESS\",\n        payload: json\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"FETCH_USERS_ERROR\",\n        payload: err\n      });\n    });\n  };\n  console.log(\"action\");\n};\nexport const register = newUser => {\n  return dispatch => {\n    axios.post(\"http://localhost:5000/api/users/register\", newUser).then(res => {\n      console.log(\"response\", res);\n\n      if (res.status === 200) {\n        //send the user to his account page\n        dispatch({\n          type: \"REGISTER_SUCCESS\",\n          payload: res\n        });\n        window.location = \"/UserAccount\";\n      }\n    }).catch(error => {\n      console.log(\"error\" + error.response);\n\n      if (error.response) {\n        if (error.response.status === 409) {\n          alert(\"loggin error\");\n        } else {//alert with something else\n        }\n      }\n    }); //add the full url of your back end\n  };\n};\nexport const login = user => {\n  return dispatch => {\n    axios.post(\"http://localhost:5000/api/users/login\", user).then(res => {\n      console.log(\"response\", res);\n\n      if (res.status === 200) {\n        //send the user to his account page\n        dispatch({\n          type: \"LOGIN_SUCCESS\",\n          payload: res\n        }); // window.location = \"/UserAccount\";\n\n        href = \"http://localhost:5000/api/cities\";\n      }\n    }).catch(error => {\n      console.log(\"error\" + error);\n\n      if (error.response) {\n        if (error.response.status === 409) {\n          alert(\"loggin error\");\n        } else {//alert with something else\n        }\n      }\n    }); //add the full url of your back end\n  };\n};","map":{"version":3,"sources":["D:/mernProject2/myTinerary/client/src/store/actions/usersAction.js"],"names":["axios","Router","fetchUsersAction","dispatch","fetch","then","resp","json","type","payload","catch","err","console","log","register","newUser","post","res","status","window","location","error","response","alert","login","user","href"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AAEA,OAAO,MAAMC,gBAAgB,GAAG,MAAM;AACpC,SAAOC,QAAQ,IAAI;AACjB;AACAC,IAAAA,KAAK,CAAC,qCAAD,CAAL,CACGC,IADH,CACQC,IAAI,IAAI;AACZ,aAAOA,IAAI,CAACC,IAAL,EAAP;AACD,KAHH,EAIGF,IAJH,CAIQE,IAAI,IAAI;AACZJ,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,qBAAR;AAA+BC,QAAAA,OAAO,EAAEF;AAAxC,OAAD,CAAR;AACD,KANH,EAOGG,KAPH,CAOSC,GAAG,IAAI;AACZR,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,mBAAR;AAA6BC,QAAAA,OAAO,EAAEE;AAAtC,OAAD,CAAR;AACD,KATH;AAUD,GAZD;AAcAC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,CAhBM;AAkBP,OAAO,MAAMC,QAAQ,GAAGC,OAAO,IAAI;AACjC,SAAOZ,QAAQ,IAAI;AACjBH,IAAAA,KAAK,CACFgB,IADH,CACQ,0CADR,EACoDD,OADpD,EAEGV,IAFH,CAEQY,GAAG,IAAI;AACXL,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,GAAxB;;AACA,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAf,QAAAA,QAAQ,CAAC;AAAEK,UAAAA,IAAI,EAAE,kBAAR;AAA4BC,UAAAA,OAAO,EAAEQ;AAArC,SAAD,CAAR;AACAE,QAAAA,MAAM,CAACC,QAAP,GAAkB,cAAlB;AACD;AACF,KATH,EAUGV,KAVH,CAUSW,KAAK,IAAI;AACdT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAUQ,KAAK,CAACC,QAA5B;;AACA,UAAID,KAAK,CAACC,QAAV,EAAoB;AAClB,YAAID,KAAK,CAACC,QAAN,CAAeJ,MAAf,KAA0B,GAA9B,EAAmC;AACjCK,UAAAA,KAAK,CAAC,cAAD,CAAL;AACD,SAFD,MAEO,CACL;AACD;AACF;AACF,KAnBH,EADiB,CAqBjB;AACD,GAtBD;AAuBD,CAxBM;AA0BP,OAAO,MAAMC,KAAK,GAAGC,IAAI,IAAI;AAC3B,SAAOtB,QAAQ,IAAI;AACjBH,IAAAA,KAAK,CACFgB,IADH,CACQ,uCADR,EACiDS,IADjD,EAEGpB,IAFH,CAEQY,GAAG,IAAI;AACXL,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBI,GAAxB;;AACA,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAf,QAAAA,QAAQ,CAAC;AAAEK,UAAAA,IAAI,EAAE,eAAR;AAAyBC,UAAAA,OAAO,EAAEQ;AAAlC,SAAD,CAAR,CAFsB,CAGtB;;AACAS,QAAAA,IAAI,GAAG,kCAAP;AACD;AACF,KAVH,EAWGhB,KAXH,CAWSW,KAAK,IAAI;AACdT,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAUQ,KAAtB;;AACA,UAAIA,KAAK,CAACC,QAAV,EAAoB;AAClB,YAAID,KAAK,CAACC,QAAN,CAAeJ,MAAf,KAA0B,GAA9B,EAAmC;AACjCK,UAAAA,KAAK,CAAC,cAAD,CAAL;AACD,SAFD,MAEO,CACL;AACD;AACF;AACF,KApBH,EADiB,CAsBjB;AACD,GAvBD;AAwBD,CAzBM","sourcesContent":["// I cleaned a bit your action, It was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\nimport axios from \"axios\";\nimport { Router } from \"react-router-dom\";\n\nexport const fetchUsersAction = () => {\n  return dispatch => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/users/all\")\n      .then(resp => {\n        return resp.json();\n      })\n      .then(json => {\n        dispatch({ type: \"FETCH_USERS_SUCCESS\", payload: json });\n      })\n      .catch(err => {\n        dispatch({ type: \"FETCH_USERS_ERROR\", payload: err });\n      });\n  };\n\n  console.log(\"action\");\n};\n\nexport const register = newUser => {\n  return dispatch => {\n    axios\n      .post(\"http://localhost:5000/api/users/register\", newUser)\n      .then(res => {\n        console.log(\"response\", res);\n        if (res.status === 200) {\n          //send the user to his account page\n          dispatch({ type: \"REGISTER_SUCCESS\", payload: res });\n          window.location = \"/UserAccount\";\n        }\n      })\n      .catch(error => {\n        console.log(\"error\" + error.response);\n        if (error.response) {\n          if (error.response.status === 409) {\n            alert(\"loggin error\");\n          } else {\n            //alert with something else\n          }\n        }\n      });\n    //add the full url of your back end\n  };\n};\n\nexport const login = user => {\n  return dispatch => {\n    axios\n      .post(\"http://localhost:5000/api/users/login\", user)\n      .then(res => {\n        console.log(\"response\", res);\n        if (res.status === 200) {\n          //send the user to his account page\n          dispatch({ type: \"LOGIN_SUCCESS\", payload: res });\n          // window.location = \"/UserAccount\";\n          href = \"http://localhost:5000/api/cities\";\n        }\n      })\n      .catch(error => {\n        console.log(\"error\" + error);\n        if (error.response) {\n          if (error.response.status === 409) {\n            alert(\"loggin error\");\n          } else {\n            //alert with something else\n          }\n        }\n      });\n    //add the full url of your back end\n  };\n};\n"]},"metadata":{},"sourceType":"module"}