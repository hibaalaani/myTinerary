{"ast":null,"code":"// I cleaned a bit your action, I was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\"; // import dependency\n\nexport const fitchItinerariesAction = () => {\n  return dispatch => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/itineraries\").then(resp => {\n      return resp.json();\n    }).then(json => {\n      dispatch({\n        type: \"FETCH_ITINERARIES_SUCCESS\",\n        payload: json\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"FETCH_ITINERARIES_ERROR\",\n        payload: err\n      });\n    });\n  };\n};\nexport const fetchItinerariesByCityName = city => {\n  return dispatch => {\n    fetch(\"http://localhost:5000/api/itineraries/\" + city).then(resp => {\n      return resp.json();\n    }).then(json => {\n      dispatch({\n        type: \"FETCH_ITINERARIES_SUCCESS\",\n        payload: json\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"FETCH_ITINERARIES_ERROR\",\n        payload: err\n      });\n    });\n  };\n};\nexport const fetchItinerariesFavorite = (emailAdded, name) => {\n  console.log(\"name\", name);\n  return dispatch => {\n    axios.post(`http://localhost:5000/api/itineraries/${name}/favorites`, {\n      email: emailAdded\n    }).then(res => {\n      console.log(\"response\", res);\n\n      if (res.status === 200) {\n        //send the user to his account page\n        dispatch({\n          type: \"ADD_ITINERARY_FAVORITE\"\n        });\n        dispatch(fetchItinerariesByCityName(\"Trapazon\"));\n      }\n    }).catch(error => {\n      console.log(\"error\" + error.response);\n\n      if (error.response) {\n        if (error.response.status === 409) {\n          alert(\"problem with email\");\n        } else {\n          //alert with something else\n          alert(\"Be Sure From Your email and link\");\n        }\n      }\n    });\n  };\n};","map":{"version":3,"sources":["D:/mernProject2/myTinerary/client/src/store/actions/itineraryActions.js"],"names":["axios","jwt_decode","fitchItinerariesAction","dispatch","fetch","then","resp","json","type","payload","catch","err","fetchItinerariesByCityName","city","fetchItinerariesFavorite","emailAdded","name","console","log","post","email","res","status","error","response","alert"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB,C,CAAqC;;AAErC,OAAO,MAAMC,sBAAsB,GAAG,MAAM;AAC1C,SAAQC,QAAD,IAAc;AACnB;AACAC,IAAAA,KAAK,CAAC,uCAAD,CAAL,CACGC,IADH,CACSC,IAAD,IAAU;AACd,aAAOA,IAAI,CAACC,IAAL,EAAP;AACD,KAHH,EAIGF,IAJH,CAISE,IAAD,IAAU;AACdJ,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,2BAAR;AAAqCC,QAAAA,OAAO,EAAEF;AAA9C,OAAD,CAAR;AACD,KANH,EAOGG,KAPH,CAOUC,GAAD,IAAS;AACdR,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,yBAAR;AAAmCC,QAAAA,OAAO,EAAEE;AAA5C,OAAD,CAAR;AACD,KATH;AAUD,GAZD;AAaD,CAdM;AAeP,OAAO,MAAMC,0BAA0B,GAAIC,IAAD,IAAU;AAClD,SAAQV,QAAD,IAAc;AACnBC,IAAAA,KAAK,CAAC,2CAA2CS,IAA5C,CAAL,CACGR,IADH,CACSC,IAAD,IAAU;AACd,aAAOA,IAAI,CAACC,IAAL,EAAP;AACD,KAHH,EAIGF,IAJH,CAISE,IAAD,IAAU;AACdJ,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,2BAAR;AAAqCC,QAAAA,OAAO,EAAEF;AAA9C,OAAD,CAAR;AACD,KANH,EAOGG,KAPH,CAOUC,GAAD,IAAS;AACdR,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,yBAAR;AAAmCC,QAAAA,OAAO,EAAEE;AAA5C,OAAD,CAAR;AACD,KATH;AAUD,GAXD;AAYD,CAbM;AAcP,OAAO,MAAMG,wBAAwB,GAAG,CAACC,UAAD,EAAaC,IAAb,KAAsB;AAC5DC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,IAApB;AACA,SAAQb,QAAD,IAAc;AACnBH,IAAAA,KAAK,CACFmB,IADH,CACS,yCAAwCH,IAAK,YADtD,EACmE;AAC/DI,MAAAA,KAAK,EAAEL;AADwD,KADnE,EAIGV,IAJH,CAISgB,GAAD,IAAS;AACbJ,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBG,GAAxB;;AACA,UAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAnB,QAAAA,QAAQ,CAAC;AAAEK,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAR;AACAL,QAAAA,QAAQ,CAACS,0BAA0B,CAAC,UAAD,CAA3B,CAAR;AACD;AACF,KAXH,EAYGF,KAZH,CAYUa,KAAD,IAAW;AAChBN,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAUK,KAAK,CAACC,QAA5B;;AACA,UAAID,KAAK,CAACC,QAAV,EAAoB;AAClB,YAAID,KAAK,CAACC,QAAN,CAAeF,MAAf,KAA0B,GAA9B,EAAmC;AACjCG,UAAAA,KAAK,CAAC,oBAAD,CAAL;AACD,SAFD,MAEO;AACL;AACAA,UAAAA,KAAK,CAAC,kCAAD,CAAL;AACD;AACF;AACF,KAtBH;AAuBD,GAxBD;AAyBD,CA3BM","sourcesContent":["// I cleaned a bit your action, I was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\"; // import dependency\n\nexport const fitchItinerariesAction = () => {\n  return (dispatch) => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/itineraries\")\n      .then((resp) => {\n        return resp.json();\n      })\n      .then((json) => {\n        dispatch({ type: \"FETCH_ITINERARIES_SUCCESS\", payload: json });\n      })\n      .catch((err) => {\n        dispatch({ type: \"FETCH_ITINERARIES_ERROR\", payload: err });\n      });\n  };\n};\nexport const fetchItinerariesByCityName = (city) => {\n  return (dispatch) => {\n    fetch(\"http://localhost:5000/api/itineraries/\" + city)\n      .then((resp) => {\n        return resp.json();\n      })\n      .then((json) => {\n        dispatch({ type: \"FETCH_ITINERARIES_SUCCESS\", payload: json });\n      })\n      .catch((err) => {\n        dispatch({ type: \"FETCH_ITINERARIES_ERROR\", payload: err });\n      });\n  };\n};\nexport const fetchItinerariesFavorite = (emailAdded, name) => {\n  console.log(\"name\", name);\n  return (dispatch) => {\n    axios\n      .post(`http://localhost:5000/api/itineraries/${name}/favorites`, {\n        email: emailAdded,\n      })\n      .then((res) => {\n        console.log(\"response\", res);\n        if (res.status === 200) {\n          //send the user to his account page\n          dispatch({ type: \"ADD_ITINERARY_FAVORITE\" });\n          dispatch(fetchItinerariesByCityName(\"Trapazon\"));\n        }\n      })\n      .catch((error) => {\n        console.log(\"error\" + error.response);\n        if (error.response) {\n          if (error.response.status === 409) {\n            alert(\"problem with email\");\n          } else {\n            //alert with something else\n            alert(\"Be Sure From Your email and link\");\n          }\n        }\n      });\n  };\n};\n"]},"metadata":{},"sourceType":"module"}