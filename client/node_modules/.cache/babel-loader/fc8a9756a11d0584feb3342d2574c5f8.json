{"ast":null,"code":"import Axios from \"axios\";\nexport const FITCH_CITY = \"FITCH_CITY\"; // I cleaned a bit your action, It was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\n\nexport const fetchCitiesAction = () => {\n  return dispatch => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/cities/all\").then(resp => {\n      return resp.json();\n    }).then(json => {\n      dispatch({\n        type: \"FETCH_CITIES_SUCCESS\",\n        payload: json\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"FETCH_CITIES_ERROR\",\n        payload: err\n      });\n    });\n  };\n};\nexport const fetchAddCity = (name, country, picture) => {\n  Axios.post(\"http://localhost:5000/api/cities/\", {\n    newCity: name,\n    country,\n    picture\n  }).then(res => {\n    console.log(\"response\", res);\n\n    if (res.status === 200) {\n      //send the user to his account page\n      dispatch({\n        type: \"DELETE_COMMENTS\"\n      });\n      dispatch(fetchItinerariesByCityName(name));\n    }\n  }).catch(error => {\n    console.log(\"error\" + error.response);\n\n    if (error.response) {\n      if (error.response.status === 409) {\n        alert(\"problem with email\");\n      } else {\n        //alert with something else\n        alert(\"Be Sure From Your email and link\");\n      }\n    }\n  });\n};","map":{"version":3,"sources":["D:/mernProject2/myTinerary/client/src/store/actions/cityActions.js"],"names":["Axios","FITCH_CITY","fetchCitiesAction","dispatch","fetch","then","resp","json","type","payload","catch","err","fetchAddCity","name","country","picture","post","newCity","res","console","log","status","fetchItinerariesByCityName","error","response","alert"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,UAAU,GAAG,YAAnB,C,CAEP;AACA;;AACA,OAAO,MAAMC,iBAAiB,GAAG,MAAM;AACrC,SAAQC,QAAD,IAAc;AACnB;AACAC,IAAAA,KAAK,CAAC,sCAAD,CAAL,CACGC,IADH,CACSC,IAAD,IAAU;AACd,aAAOA,IAAI,CAACC,IAAL,EAAP;AACD,KAHH,EAIGF,IAJH,CAISE,IAAD,IAAU;AACdJ,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,sBAAR;AAAgCC,QAAAA,OAAO,EAAEF;AAAzC,OAAD,CAAR;AACD,KANH,EAOGG,KAPH,CAOUC,GAAD,IAAS;AACdR,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE,oBAAR;AAA8BC,QAAAA,OAAO,EAAEE;AAAvC,OAAD,CAAR;AACD,KATH;AAUD,GAZD;AAaD,CAdM;AAeP,OAAO,MAAMC,YAAY,GAAG,CAACC,IAAD,EAAOC,OAAP,EAAgBC,OAAhB,KAA4B;AACtDf,EAAAA,KAAK,CAACgB,IAAN,CAAW,mCAAX,EAAgD;AAC9CC,IAAAA,OAAO,EAAEJ,IADqC;AAE9CC,IAAAA,OAF8C;AAG9CC,IAAAA;AAH8C,GAAhD,EAKGV,IALH,CAKSa,GAAD,IAAS;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBF,GAAxB;;AACA,QAAIA,GAAG,CAACG,MAAJ,KAAe,GAAnB,EAAwB;AACtB;AACAlB,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACAL,MAAAA,QAAQ,CAACmB,0BAA0B,CAACT,IAAD,CAA3B,CAAR;AACD;AACF,GAZH,EAaGH,KAbH,CAaUa,KAAD,IAAW;AAChBJ,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAUG,KAAK,CAACC,QAA5B;;AACA,QAAID,KAAK,CAACC,QAAV,EAAoB;AAClB,UAAID,KAAK,CAACC,QAAN,CAAeH,MAAf,KAA0B,GAA9B,EAAmC;AACjCI,QAAAA,KAAK,CAAC,oBAAD,CAAL;AACD,OAFD,MAEO;AACL;AACAA,QAAAA,KAAK,CAAC,kCAAD,CAAL;AACD;AACF;AACF,GAvBH;AAwBD,CAzBM","sourcesContent":["import Axios from \"axios\";\n\nexport const FITCH_CITY = \"FITCH_CITY\";\n\n// I cleaned a bit your action, It was almost good, just a few probem with the .json() convertion and handeling the payload\n//it shuld work now ;)\nexport const fetchCitiesAction = () => {\n  return (dispatch) => {\n    //add the full url of your back end\n    fetch(\"http://localhost:5000/api/cities/all\")\n      .then((resp) => {\n        return resp.json();\n      })\n      .then((json) => {\n        dispatch({ type: \"FETCH_CITIES_SUCCESS\", payload: json });\n      })\n      .catch((err) => {\n        dispatch({ type: \"FETCH_CITIES_ERROR\", payload: err });\n      });\n  };\n};\nexport const fetchAddCity = (name, country, picture) => {\n  Axios.post(\"http://localhost:5000/api/cities/\", {\n    newCity: name,\n    country,\n    picture,\n  })\n    .then((res) => {\n      console.log(\"response\", res);\n      if (res.status === 200) {\n        //send the user to his account page\n        dispatch({ type: \"DELETE_COMMENTS\" });\n        dispatch(fetchItinerariesByCityName(name));\n      }\n    })\n    .catch((error) => {\n      console.log(\"error\" + error.response);\n      if (error.response) {\n        if (error.response.status === 409) {\n          alert(\"problem with email\");\n        } else {\n          //alert with something else\n          alert(\"Be Sure From Your email and link\");\n        }\n      }\n    });\n};\n"]},"metadata":{},"sourceType":"module"}